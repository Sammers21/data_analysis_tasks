
. use salary.dta, clear

. describe

Contains data from salary.dta
  obs:            50                          
 vars:             4                          19 Feb 2013 14:07
 size:           750                          
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
position        str9    %9s                   Respondent's work position
salary          long    %8.0g                 Monthly salary in rubles
foreigner       byte    %8.0g      foreigner
                                              Is a person foreign citizen or
                                                not
sex             byte    %8.0g      sex        Respondent's sex
-------------------------------------------------------------------------------
Sorted by: 

. tab position

Respondent' |
     s work |
   position |      Freq.     Percent        Cum.
------------+-----------------------------------
     docent |         18       36.00       36.00
   lecturer |         12       24.00       60.00
  professor |         20       40.00      100.00
------------+-----------------------------------
      Total |         50      100.00

. encode position, generate(num_position)

. tab num_position

Respondent' |
     s work |
   position |      Freq.     Percent        Cum.
------------+-----------------------------------
     docent |         18       36.00       36.00
   lecturer |         12       24.00       60.00
  professor |         20       40.00      100.00
------------+-----------------------------------
      Total |         50      100.00

. describe

Contains data from salary.dta
  obs:            50                          
 vars:             5                          19 Feb 2013 14:07
 size:           950                          
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
position        str9    %9s                   Respondent's work position
salary          long    %8.0g                 Monthly salary in rubles
foreigner       byte    %8.0g      foreigner
                                              Is a person foreign citizen or
                                                not
sex             byte    %8.0g      sex        Respondent's sex
num_position    long    %9.0g      num_position
                                              Respondent's work position
-------------------------------------------------------------------------------
Sorted by: 
     Note: Dataset has changed since last saved.

. generate dollor_rub_ratio = 64

. generate tax = .
(50 missing values generated)

. replace tax = (salary / dollor_rub_ratio) * 0.13 if foreigner == 0
(33 real changes made)

. replace tax = (salary / dollor_rub_ratio) * 0.30 if foreigner == 1
(17 real changes made)

. tab tax

        tax |      Freq.     Percent        Cum.
------------+-----------------------------------
     40.625 |          1        2.00        2.00
     56.875 |          1        2.00        4.00
    60.9375 |          2        4.00        8.00
    69.0625 |          2        4.00       12.00
      81.25 |          3        6.00       18.00
   101.5625 |          1        2.00       20.00
   109.6875 |          1        2.00       22.00
     113.75 |          1        2.00       24.00
    121.875 |          1        2.00       26.00
     131.25 |          2        4.00       30.00
   136.0938 |          1        2.00       32.00
    140.625 |          1        2.00       34.00
   142.1875 |          2        4.00       38.00
        150 |          1        2.00       40.00
   158.4375 |          1        2.00       42.00
      162.5 |          3        6.00       48.00
   176.7188 |          1        2.00       50.00
   182.8125 |          1        2.00       52.00
      187.5 |          3        6.00       58.00
   192.9688 |          1        2.00       60.00
    203.125 |          1        2.00       62.00
   210.9375 |          1        2.00       64.00
    234.375 |          1        2.00       66.00
     243.75 |          2        4.00       70.00
   264.0625 |          1        2.00       72.00
     281.25 |          1        2.00       74.00
    284.375 |          2        4.00       78.00
    328.125 |          1        2.00       80.00
    365.625 |          1        2.00       82.00
     406.25 |          2        4.00       86.00
    421.875 |          2        4.00       90.00
     468.75 |          1        2.00       92.00
   507.8125 |          1        2.00       94.00
     656.25 |          1        2.00       96.00
      937.5 |          2        4.00      100.00
------------+-----------------------------------
      Total |         50      100.00

. egen rnk = rank(salary), field

. gsort -salary

. list

     +---------------------------------------------------------------+
  1. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 250000 |       no |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            507.8125             |               1             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  2. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 200000 |       no |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              406.25             |               2             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  3. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 200000 |      yes |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |               937.5             |               2             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  4. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 200000 |       no |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              406.25             |               2             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  5. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 200000 |      yes |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |               937.5             |               2             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  6. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 180000 |       no | female | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             365.625             |               6             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  7. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 140000 |       no |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             284.375             |               7             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  8. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 140000 |      yes |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              656.25             |               7             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  9. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 140000 |       no | female | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             284.375             |               7             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 10. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 130000 |       no |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            264.0625             |              10             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 11. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 120000 |       no |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              243.75             |              11             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 12. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 120000 |       no |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              243.75             |              11             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 13. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 100000 |       no |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             203.125             |              13             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 14. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor | 100000 |      yes | female | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              468.75             |              13             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 15. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor |  95000 |       no |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            192.9688             |              15             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 16. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor |  90000 |      yes | female | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             421.875             |              16             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 17. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  90000 |       no | female |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            182.8125             |              16             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 18. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor |  90000 |      yes | female | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             421.875             |              16             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 19. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor |  87000 |       no |   male | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            176.7188             |              19             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 20. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  80000 |       no |   male |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |               162.5             |              20             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 21. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  80000 |       no |   male |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |               162.5             |              20             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 22. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  80000 |       no |   male |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |               162.5             |              20             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 23. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor |  78000 |       no | female | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            158.4375             |              23             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 24. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  70000 |       no | female |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            142.1875             |              24             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 25. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  70000 |       no | female |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            142.1875             |              24             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 26. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  70000 |      yes |   male |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             328.125             |              24             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 27. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  67000 |       no |   male |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            136.0938             |              27             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 28. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  60000 |      yes | female |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              281.25             |              28             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 29. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  60000 |       no |   male |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             121.875             |              28             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 30. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  56000 |       no | female |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              113.75             |              30             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 31. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     | professor |  54000 |       no | female | professor |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            109.6875             |              31             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 32. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  50000 |      yes |   male |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             234.375             |              32             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 33. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  50000 |       no |   male |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            101.5625             |              32             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 34. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  45000 |      yes | female |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |            210.9375             |              34             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 35. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  40000 |      yes |   male |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |               187.5             |              35             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 36. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  40000 |       no |   male |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |               81.25             |              35             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 37. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  40000 |       no |   male |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |               81.25             |              35             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 38. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  40000 |       no | female |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |               81.25             |              35             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 39. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  40000 |      yes | female |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |               187.5             |              35             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 40. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  40000 |      yes | female |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |               187.5             |              35             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 41. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  34000 |       no | female |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             69.0625             |              41             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 42. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  34000 |       no |   male |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             69.0625             |              41             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 43. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  32000 |      yes | female |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |                 150             |              43             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 44. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  30000 |      yes |   male |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             140.625             |              44             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 45. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  30000 |       no |   male |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             60.9375             |              44             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 46. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  30000 |       no |   male |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |             60.9375             |              44             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 47. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |    docent |  28000 |      yes | female |    docent |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              131.25             |              47             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 48. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  28000 |      yes | female |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              131.25             |              47             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 49. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  28000 |       no | female |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              56.875             |              47             |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 50. |  position | salary | foreig~r |    sex | num_pos~n | dollor~o |
     |  lecturer |  20000 |       no | female |  lecturer |       64 |
     |---------------------------------------------------------------|
     |                 tax             |             rnk             |
     |              40.625             |              50             |
     +---------------------------------------------------------------+

. save salary_modif.dta
file salary_modif.dta saved

. 
end of do-file
